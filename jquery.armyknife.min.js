/* jquery.armyKnife 1.7, joe mocerino, roman pacheco, tnt dental */
(function(a){var b={pn:"armyKnife",cp:{a:{marginLeft:"0%"},ab:{zIndex:100},b:{zIndex:10},hr:{marginLeft:"100%"},hl:{marginLeft:"-100%"},fo:{opacity:0},fi:{opacity:1}},r:{t:{fi:RegExp("fade(,|$|In)","i"),fo:RegExp("fade(,|$|Out)","i"),si:RegExp("slide(,|$|In)","i"),so:RegExp("slide(,|$|Out)","i"),n:RegExp("none(,|$)","i")}}},c={b:a("<a />",{href:"#"})},d={speed:300,sections:"> *",startingSection:0,easing:"swing",transition:"none",autoResize:!1,resizeSpeed:200,autoRotate:!1,autoRotateDelay:5e3,generateNav:!1,navType:"empty",navItemSource:function(){return" "},navItemCode:function(a){return c.b.clone().html(a)},navID:!1,navClass:b.pn+"-Nav",navTrigger:"click",itemsPerNav:0,activeNavItemClass:"active",showSectionButtons:!1,sectionButtonClass:b.pn+"-Btn",sectionButtonCodeNext:c.b.clone(),sectionButtonCodePrev:c.b.clone(),sectionOnEnter:!1,sectionOnExit:!1,sectionBeforeEnter:!1,sectionBeforeExit:!1,useContinue:!1},e={init:function(c,f){return this.each(function(){var g=a(this),h=g.data(b.pn);if(!h){var i=a.extend(!0,{},d);i=a.extend(!0,i,c||{}),a.extend(!0,i,{sl:[],ni:[],cs:i.startingSection,ts:!1,tr:i.transition,ar:i.autoRotate,anic:i.activeNavItemClass,soe:i.sectionOnEnter,sox:i.sectionOnExit,sbe:i.sectionBeforeEnter,sbx:i.sectionBeforeExit,uc:i.useContinue}),g.data(b.pn,i),h=g.data(b.pn);var j=g.find(h.sections);h.generateNav&&e.gn.call(g,j),a.each(j,function(c,d){if(c==h.startingSection&&a(d).css(b.cp.a)||a(d).css(b.cp.hr),h.showSectionButtons){if(c){var f=h.sectionButtonCodePrev.clone();""==f.html()&&f.html("Prev"),f.addClass(h.sectionButtonClass).bind("click",function(){return e.prev.call(g),!1}).appendTo(a(d))}if(j.length-1>c){var i=h.sectionButtonCodeNext.clone();""==i.html()&&i.html("Next"),i.addClass(h.sectionButtonClass).bind("click",function(){return e.next.call(g),!1}).appendTo(a(d))}}h.sl.push(a(d))})}if(h.ar&&e.sar.call(g),h.autoResize?(h.ts=h.cs,e.rv.call(g,f)):f&&f.call&&f(),h.beforeEnterComplete=new a.Deferred,a.when(h.beforeEnterComplete).then(function(){h.soe&&h.soe.call&&h.soe.call(h.sl[h.cs],e.gsco.call(g,"onenter"))}),h.sbe&&h.sbe.call){var k=e.gsco.call(g,"beforeenter");h.sbe.call(h.sl[h.cs],k)}(!h.uc||h.sbe&&h.sbe.call&&h.uc)&&e.resolveContinue.call(g,"beforeenter")})},gsco:function(c){var d=this,f=d.data(b.pn);if(f){var g={sections:f.sl,cont:function(){e.resolveContinue.call(d,c)}},h={beforeenter:function(){a.extend(!0,g,{current:f.ts,previous:f.cs})},onenter:function(){a.extend(!0,g,{current:f.ts,previous:f.cs})},beforeexit:function(){a.extend(!0,g,{current:f.cs,target:f.ts})},onexit:function(){a.extend(!0,g,{current:f.cs,target:f.ts})}};return h[c]()||a.extend(!0,g,{current:f.cs,previous:f.cs}),g}},trigger:function(a){var c=this,d=c.data(b.pn);if(d){var f=(""+a).toLowerCase().replace(/^section/,""),g=e.gsco.call(c,f);d[a].call(d.sl[d.cs],g)}},resolveContinue:function(a){var c=this,d=c.data(b.pn);d&&{beforeenter:function(){"object"==typeof d.beforeEnterComplete&&d.beforeEnterComplete.resolve()},onenter:function(){"object"==typeof d.onEnterComplete&&d.onEnterComplete.resolve()},beforeexit:function(){"object"==typeof d.beforeExitComplete&&d.beforeExitComplete.resolve()},onexit:function(){"object"==typeof d.onExitComplete&&d.onExitComplete.resolve()}}[a]()||!1},gn:function(d){var f=this,g=f.data(b.pn);if(g){g.nav=a("<div />");var h=g.itemsPerNav,i=a("<ul />",{"class":g.navClass}),j=d;0==g.itemsPerNav&&(h=d.length);for(var k=0;j.length;){var l=i.clone();d=j,a.each(d,function(b,i){if(b>=h)return!1;var m=a("<li />"),n=c.b.clone(),i=d[b];switch(g.navType){case"numeric":n.html(parseFloat(b+1));break;case"text":var o=g.navItemSource(a(i))||g.navItemSource;n.html(o);break;case"custom":var o=g.navItemSource(a(i))||g.navItemSource,p=g.navItemCode(o)||g.navItemCode;n="object"==typeof p?p:a(p);break;default:n.html(" ")}l.append(m),m.append(n),n.bind(g.navTrigger,{i:k},function(a){return e["goto"].call(f,a.data.i),!1}),b==g.startingSection&&m.addClass(g.anic),g.ni.push(m),j=j.filter(function(a){return j[a]!=i}),k++}),g.nav.append(l)}1==g.nav.children().length&&(g.nav=a(g.nav.children()[0])),g.navID?(a("#"+g.navID).length&&a("#"+g.navID).replaceWith(g.nav)||f.after(g.nav),g.nav.attr("id",g.navID)):f.after(g.nav)}},sar:function(){return this.each(function(){var c=a(this),d=c.data(b.pn);d&&(clearTimeout(d.autoRotateInterval),d.autoRotateInterval=setTimeout(function(){(d.anim===void 0||d.anim.state("resolved"))&&e.next.call(c)||!d.anim.state("resolved")&&a.when(d.anim).then(function(){e.next.call(c)})},d.autoRotateDelay))})},rv:function(c){return this.each(function(){var d=a(this),e=d.data(b.pn);if(e){var f=d.height(),g=e.sl[e.ts].outerHeight();f!=g&&d.animate({height:g},e.resizeSpeed,function(){!!c&&c.call&&c()})||!!c&&c.call&&c()}})},"goto":function(c){return this.each(function(){var d=a(this),f=d.data(b.pn);if(f&&c!=f.cs&&(f.anim===void 0||f.anim.state("resolved"))){f.anim=new a.Deferred,f.ar&&e.sar.call(d),f.ts=c;var g=f.cs>c?"right":"left";f.autoResize&&e.rv.call(d,function(){e.a.call(d,g)})||e.a.call(d,g)}})},next:function(){return this.each(function(){var c=a(this),d=c.data(b.pn);d&&d.sl[d.cs]&&(d.anim===void 0||d.anim.state("resolved"))&&(d.anim=new a.Deferred,d.ar&&e.sar.call(c),d.ts=d.sl[d.cs+1]?d.cs+1:0,d.autoResize&&e.rv.call(c,function(){e.a.call(c)})||e.a.call(c))})},prev:function(){return this.each(function(){var c=a(this),d=c.data(b.pn);d&&d.sl[d.cs]&&(d.anim===void 0||d.anim.state("resolved"))&&(d.anim=new a.Deferred,d.ar&&e.sar.call(c),d.ts=d.sl[d.cs-1]?d.cs-1:d.sl.length-1,d.autoResize&&e.rv.call(c,function(){e.a.call(c,"right")})||e.a.call(c,"right"))})},a:function(c,d){return d=d||function(){},this.each(function(){var f=a(this),g=f.data(b.pn);c=c||"left",g&&g.sl[g.cs]&&g.sl[g.ts]&&(g.beforeExitComplete=new a.Deferred,a.when(g.beforeExitComplete).then(function(){g.beforeEnterComplete=new a.Deferred,a.when(g.beforeEnterComplete).then(function(){g.sl[g.cs].css(b.cp.b);var h=b.cp.a;(g.tr.match(b.r.t.so)||g.tr.match(b.r.t.n))&&(h="left"==c?b.cp.hl:b.cp.hr);var i=a.extend(!0,{},h);!!g.tr.match(b.r.t.fo)&&a.extend(!0,i,b.cp.fo),g.tr.match(b.r.t.n)?(g.sl[g.cs].css(i),d()):g.sl[g.cs].animate(i,g.speed,g.easing,d),g.tr.match(b.r.t.fi)&&g.sl[g.ts].css(b.cp.fo)||g.sl[g.ts].css(b.cp.fi),g.sl[g.ts].css(b.cp.ab);var j=b.cp.a;(g.tr.match(b.r.t.si)||g.tr.match(b.r.t.n))&&(j="left"==c?b.cp.hr:b.cp.hl),g.sl[g.ts].css(j);var k=a.extend(!0,{},b.cp.a);!!g.tr.match(b.r.t.fi)&&a.extend(!0,k,b.cp.fi),g.tr.match(b.r.t.n)?(g.sl[g.ts].css(k),g.anim.resolve(),d(),g.onExitComplete=new a.Deferred,a.when(g.onExitComplete).then(function(){g.soe&&g.soe.call&&g.soe.call(g.sl[g.ts],e.gsco.call(f,"onenter"))}),g.sox&&g.sox.call&&g.sox.call(g.sl[g.cs],e.gsco.call(f,"onexit")),(!g.uc||g.sox&&g.sox.call&&g.uc)&&e.resolveContinue.call(f,"onexit")):g.sl[g.ts].animate(k,g.speed,g.easing,function(){g.anim.resolve(),d(),g.onExitComplete=new a.Deferred,a.when(g.onExitComplete).then(function(){g.soe&&g.soe.call&&g.soe.call(g.sl[g.ts],e.gsco.call(f,"onenter"))}),g.sox&&g.sox.call&&g.sox.call(g.sl[g.cs],e.gsco.call(f,"onexit")),(!g.uc||g.sox.call&&g.uc)&&e.resolveContinue.call(f,"onexit")}),g.nav&&(g.nav.find("."+g.anic).removeClass(g.activeClass),g.ni[g.ts].addClass(g.anic)),g.cs=g.ts}),g.sbe&&g.sbe.call&&g.sbe.call(g.sl[g.ts],e.gsco.call(f,"beforeenter")),(!g.uc||g.sbe&&g.sbe.call&&g.uc)&&e.resolveContinue.call(f,"beforeenter")}),g.sbx&&g.sbx.call&&g.sbx.call(g.sl[g.cs],e.gsco.call(f,"beforeexit")),(!g.uc||g.sbx&&g.sbx.call&&g.uc)&&e.resolveContinue.call(f,"beforeexit"))})}};a.fn[b.pn]=function(a){return e[a]?e[a].apply(this,Array.prototype.slice.call(arguments,1)):a&&"object"!=typeof a?(console.log(b.pn+": Invalid method passed"),void 0):e.init.apply(this,arguments)}})(jQuery);